services:
  caddy:
    image: caddy:latest
    restart: unless-stopped
    ports:
      - "8080:80"
      - "4443:443"
#      - "443:443"
    volumes:
      - $PWD/srcs/Caddyfile:/etc/caddy/Caddyfile
      - $PWD/srcs/site:/var/www/html/
    environment:
      - GUESTNAME
#      - caddy_data:/data
#      - caddy_config:/config
#    secrets :
#      - ssl_crt
#      - ssl_key
#    networks:
#      - inception
#
#  mariadb:
#    build: ./requirements/mariadb
#    environment:
#      - DB_NAME
#      - DB_USER
#      - DB_PASS
#      - DB_ROOT_PASS
#    restart: on-failure
#    volumes:
#      - database-volume:/var/lib/mysql
#      # - "$HOME/data/database:/var/lib/mysql"
#    networks:
#      - inception
#    secrets :
#      - db_pass
#      - db_root_pass
#
#  wp-php:
#    build: ./requirements/wordpress
#    depends_on:
#      - mariadb
#    environment:
#      - COMPOSE_PROJECT_NAME
#      - HOSTNAME
#      - DB_NAME
#      - DB_USER
#      - DB_PASS
#      - WP_ADMIN
#      - WP_ADMIN_MAIL
#      - WP_ADMIN_PASS
#    restart: on-failure
#    volumes:
#      - wordpress-volume:/var/www/html/
#      # - "$HOME/data/wordpress:/var/www/html/"
#    networks:
#      - inception
#    secrets:
#      - db_pass
#      - wp_admin_pass
#
#secrets:
#  ssl_crt:
#    file: $SSL_CRT_PATH
#  ssl_key:
#    file: $SSL_KEY_PATH
#  db_pass:
#    file: $DB_PASS_PATH_HOST
#  db_root_pass:
#    file: $DB_ROOT_PASS_PATH_HOST
#  wp_admin_pass:
#    file: $WP_ADMIN_PASS_PATH_HOST
#
#networks:
#  inception:
#    name: inception-network
#    driver: bridge
#
volumes:
  caddy_data:
    external: true
  caddy_config:

#  database-volume:
#    name: database-volume
#    driver: local
#    driver_opts:
#      type: none
#      o: bind
#      device: $HOME/data/database
#  wordpress-volume:
#    name: wordpress-volume
#    driver: local
#    driver_opts:
#      type: none
#      o: bind
#      device: $HOME/data/wordpress
