# Documentation de l'API


### Base de l'URL
```
https://localhost:4443/api/
```


## Authentification
L'API utilise un systÃ¨me d'authentification basÃ© sur **JSON Web Tokens (JWT)**.

### Obtention d'un token
```
POST /auth/login/
```
- **Body (JSON)** :
  ```json
  {
    "*username": "str",
    "*password": "str"
  }
  ```
- **RÃ©ponse (succÃ¨s)** :
  ```json
  {
    "access": "str",
    "refresh": "str"
  }
  ```

### Utilisation du token
Pour accÃ©der aux endpoints protÃ©gÃ©s, ajoutez le token dans l'en-tÃªte `Authorization` :
```
Authorization: Bearer <access_token>
```

### Endpoints avec authentification
Tous les endpoints marquÃ©s avec ğŸ”’ nÃ©cessitent une authentification. Ces endpoints correspondent aux requÃªtes qui communiquent avec le front (c'est l'API public).

### Codes de rÃ©ponse
- `200 OK` : RequÃªte rÃ©ussie.
- `201 Created` : Ressource crÃ©Ã©e.
- `204 No Content` : RequÃªte rÃ©ussie sans return de body (souvent utilisÃ© lors de la suppression d'un Ã©lÃ©ment).
- `400 Bad Request` : Erreur de validation.
- `401 Unauthorized` : Authentification requise.
- `403 Permission Denied` : Le client n'a pas les droits d'accÃ¨s au contenu (contrairement Ã  401, l'identitÃ© du client est connue du serveur.)
- `404 Not Found` : Ressource introuvable.
- `405 Method Not Allowed` : MÃ©thode de requÃªte non autorisÃ©e.
- `409 Conflict` : Conflit lors de la requÃªte (souvent lorsque le client tente de crÃ©er une ressource qui existe dÃ©jÃ ).
- `415 Unsupported Media Type` : Le format du *content-type* demandÃ© n'est pas pris en charge par le serveur.
- `429 Throttled` : Toutes les requÃªtes **POST**, **PUT** et **PATCH** peuvent renvoyer cette erreur. Cela arrive quand beaucoup de requÃªtes sont envoyÃ©es strictement au mÃªme moment. Le dÃ©tail de l'erreur est toujours le mÃªme : *"Request was throttled."*
- `500 Internal Server Error` : Erreur cÃ´tÃ© serveur.
- `502 Bad Gateway` : Cette rÃ©ponse d'erreur signifie que le serveur a reÃ§u une rÃ©ponse non valide.
- `503 Service Unavailable` : Le serveur n'est pas prÃªt Ã  traiter la demande (dans notre cas, parce qu'un micro service autre que celui de la requÃªte ne fonctionne plus).

## Pagination

L'API utilise un systÃ¨me de pagination basÃ© sur les paramÃ¨tres **`limit`** et **`offset`** pour gÃ©rer efficacement les rÃ©ponses nombreuses.

- **`limit`** : DÃ©finit le nombre maximum d'Ã©lÃ©ments Ã  retourner dans une rÃ©ponse.
    - Par dÃ©faut : `20` (si non spÃ©cifiÃ©).
    - Exemple : `?limit=50` retournera un maximum de 50 Ã©lÃ©ments.

- **`offset`** : DÃ©finit le point de dÃ©part des Ã©lÃ©ments Ã  inclure dans la rÃ©ponse.
    - Par dÃ©faut : `0` (si non spÃ©cifiÃ©).
    - Exemple : `?offset=40` commencera Ã  retourner les Ã©lÃ©ments Ã  partir du 41áµ‰.

### Exemple
Si l'API contient 100 Ã©lÃ©ments :
- Une requÃªte avec `?limit=10&offset=20` retourn les Ã©lÃ©ments de l'index 21 Ã  30.

### RÃ©ponse typique avec pagination
```json
{
  "count": "int",
  "next": "https://localhost:4443/api/resource/?limit=10&offset=30",
  "previous": "https://localhost:4443/api/resource/?limit=10&offset=10",
  "results": []
}
```
- ***count*** : Nombre total d'Ã©lÃ©ments
- ***next*** : URL de la page suivante
- ***previous*** : URL de la page prÃ©cÃ©dente
- ***results*** : Liste des Ã©lÃ©ments paginÃ©s

Les champs **`next`** et **`previous`** peuvent Ãªtre Ã©gaux Ã  `null` s'il n'existe pas de lien vers une page suivante ou prÃ©cÃ©dente.

### Body
Tous les champs prÃ©cÃ©dÃ©s d'un `*` sont exigÃ©s.
Les types dans les champs correspondent au type utilisÃ© en _python_.
Lorsqu'un champ peut Ãªtre renseignÃ© dans une requÃªte `GET`, il doit Ãªtre renseignÃ© dans l'URL de la requÃªte sous la forme : `url/?nom_du_champ=valaeur_du_champ`.


# Auth

### Base URL
```
https://localhost:4443/api/auth/
```
## Connection

```
POST https://localhost:4443/api/auth/login/
```
- **Description** : Permet aux utilisateurs de se connecter en fournissant leurs identifiants.
- **Body (JSON)** :
  ```json
  {
    "*username": "str",
    "*password": "str"
  }
  ```
- **RÃ©ponse (succÃ¨s)** :
  ```json
  {
    "access": "str",
    "refresh": "str"
  }
  ```
- **Codes de rÃ©ponse** :
    - `200 OK`
    - `401 Unauthorized`

## Utilisateur invitÃ©
```
POST https://localhost:4443/api/auth/guest/
```
- **Description** : Permet de se connecter en tant qu'utilisateur invitÃ© sans avoir Ã  crÃ©er de compte.
- **RÃ©ponse (succÃ¨s)** :
  ```json
  {
    "access": "str",
    "refresh": "str"
  }
  ```
- **Codes de rÃ©ponse**
    - `201 Ressource Created`

## RafraÃ®chissement du token
```
ğŸ”’ POST https://localhost:4443/api/auth/refresh/
```
- **Description** : Permet d'obtenir un nouveau token `access` Ã  l'aide d'un token `refresh` valide.
- **Body (JSON)** :
  ```json
  {
    "*refresh": "str"
  }
  ```
- **RÃ©ponse (succÃ¨s)** :
  ```json
  {
    "access": "str"
  }
  ```

## Enregistrement d'un utilisateur invitÃ©
```
ğŸ”’ PUT https://localhost:4443/api/auth/register/guest/
```
- **Description** : Permet d'enregistrer un utilisateur invitÃ©.
- **Body (JSON)** :
  ```json
  {
    "*username": "str",
    "*password": "str"
  }
  ```
- **RÃ©ponse (succÃ¨s)** :
  ```json
  {
    "*access": "str",
    "*refresh": "str"
  }
  ```

## Enregistrement d'un nouvel utilisateur
```
POST https://localhost:4443/api/auth/register/
```
- **Description** : Permet de crÃ©er un nouvel utilisateur.
- **Body (JSON)** :
  ```json
  {
    "*username": "str",
    "*password": "str"
  }
  ```
- **RÃ©ponse (succÃ¨s)** :
  ```json
  {
    "*access": "str",
    "*refresh": "str"
  }
  ```

# 401
Lorsqu'une **erreur 401** est levÃ©, dans la rÃ©ponse se trouve un champ `code` en plus du champ `detail` permettant d'identifier les raisons de l'erreur d'authentification. Voici tous les codes possibles :
- *not_authenticated* : lorsqu'il manque le token.
- *incorrect_password* : lorsque le mot de passe est incorrect.
- *user_not_found* : lorsque le token ne correspond Ã  aucun utilisateur.
- *authentication_failed* : lorsque l'authentification Ã©choue.
- *sse_connection_required* : sur certains endpoints, la connexion sse est requise.
- *password_confirmation_required* : sur certains endpoints, une confirmation du mot de passe est requise.
- *token_not_valid* : lorsque le token n'est pas valide.

# Chat

### Base URL
```
https://localhost:4443/api/chat/
```

## Conversations
```
ğŸ”’ GET https://localhost:4443/api/chat/
```
- **Description** : RÃ©cupÃ¨re la liste de toutes les conversations de l'utilisateur. Si `q` n'est pas renseignÃ© ou n'a pas de valeur, cela rÃ©cupÃ¨re uniquement les conversations que l'utilisateur voit, c'est-Ã -dire les conversations avec lesquelles le champ `view_chat` est egale Ã  `True`. Si `q` a une valeur, cela filtre la liste de toutes les conversations en ne gardant que les utilisateurs dont le nom contient `q`.
- **Body (JSON)** :
  ```json
  {
    "q": "str"
  }
  ```
- **RÃ©ponse (succÃ¨s)** :
  - results:
  ```json
  {
    "id": 56,
    "chat_with": "SmallUserInstance",
    "last_message": "MessageInstance",
    "created_at": "datetime",
    "view_chat": "bool"
  }
  ```
- **Codes de rÃ©ponse** :
  - `200 OK`
  - `401 Unauthorized`

```
ğŸ”’ POST https://localhost:4443/api/chat/
```
- **Description** : CrÃ©er une nouvelle instance de chat avec l'utilisateur passÃ© dans le body.
- **Body (JSON)** :
  ```json
  {
    "*username": "str"
  }
  ```
- **RÃ©ponse (succÃ¨s)** :
  ```json
  {
    "id": 59,
    "chat_with": "SmallUserInstance",
    "last_message": "None",
    "created_at": "datetime",
    "view_chat": "bool"
  }
  ```
- **Codes de rÃ©ponse** :
  - `201 Created`
  - `400 Bad Request`
  - `401 Unauthorized`
  - `403 Permission Denied` : Si l'utilisateur qui a reÃ§u la demande a bloquÃ© les demandes de conversation. Si l'utilisateur renseignÃ© est le mÃªme que l'utilisateur qui fait la requÃªte. Si l'utilisateur qui fait la requÃªte a bloquÃ© l'utilisateur renseignÃ©.
  - `404 Not Found` : L'utilisateur renseignÃ© n'a pas Ã©tÃ© trouvÃ© : ou parce que l'utilisateur n'existe pas, ou parce que l'utilisateur renseignÃ© est un utilisateur invitÃ©, ou parce que l'utilisateur qui a reÃ§u la demande a bloquÃ© celui qui l'a envoyÃ©e.
  - `409 Conflict` : L'instance de conversation existe dÃ©jÃ  entre les deux utilisateurs.

## Conversation
```
ğŸ”’ GET https://localhost:4443/api/chat/<int:chat_id>/
```
- **Description** : RÃ©cupÃ¨re l'instance de conversation avec le `chat_id` passÃ© dans l'endpoint de la requÃªte.
- **RÃ©ponse (succÃ¨s)** :
  ```json
  {
    "id": 69,
    "chat_with": "SmallUserInstance",
    "last_message": "MessageInstance",
    "created_at": "datetime",
    "view_chat": "bool",
    "unread_messages": "int"
  }
  ```
- **Codes de rÃ©ponse** :
  - `200 OK`
  - `401 Unauthorized`
  - `403 Permission Denied` : Si l'utilisateur demande un `chat_id` auquel il n'appartient pas ou alors que le `chat_id` n'existe pas.

```
ğŸ”’ DELETE https://localhost:4443/api/chat/<int:chat_id>/
```
- **Description** : Change le champ `view_chat` de l'instance de l'utilisateur de la conversation. Il est mis Ã  `False`. L'instance de la conversation n'est pas supprimÃ©e.
- **Codes de rÃ©ponse** :
  - `204 No Content`
  - `403 Permission Denied` : Si l'utilisateur supprime un `chat_id` auquel il n'appartient pas ou alors que le `chat_id` n'existe pas.

## Messages
```
ğŸ”’ GET https://localhost:4443/api/chat/<int:chat_id>/messages/
```
- **Description** : RÃ©cupÃ¨re la liste de tous les messages de l'instance de la conversation.
- **RÃ©ponse (succÃ¨s)** :
  - results
  ```json
  {
    "id": "int",
    "chat_id": "int",
    "author": "SmallUserInstance",
    "content": "str",
    "sent_at": "datetime",
    "is_read": "bool"
  }
  ```
- **Codes de rÃ©ponse** :
  - `200 OK`
  - `401 Unauthorized`
  - `403 Permission Denied` : Si l'utilisateur demande un `chat_id` auquel il n'appartient pas ou alors que le `chat_id` n'existe pas.

```
ğŸ”’ POST https://localhost:4443/api/<int:chat_id>/messages/
```
- **Description** : CrÃ©er un message dans l'instance de la conversation.
- **Body (JSON)** :
  ```json
  {
    "*content": "str",
    "is_read": "bool"
  }
  ```
- **RÃ©ponse (succÃ¨s)** :
  - results:
  ```json
  {
    "id": "int",
    "chat_id": "int",
    "author": "SmallUserInstance",
    "content": "str",
    "sent_at": "datetime",
    "is_read": "bool"
  }
  ```
- **Codes de rÃ©ponse** :
  - `201 Created`
  - `400 Bad Request`
  - `401 Unauthorized`
  - `403 Permission Denied` : Si l'utilisateur demande un `chat_id` auquel il n'appartient pas ou alors que le `chat_id` n'existe pas.

# Game

### Base URL
```
https://localhost:4443/api/game/
```

## Matchs
```
ğŸ”’ GET https://localhost:4443/api/game/matches/<int:user_id>/
```
- **Description** : RÃ©cupÃ¨re la liste de tous les matchs de l'utilisateur.
- **RÃ©ponse (succÃ¨s)** :
  - results:
  ```json
  {
    "id": "int",
    "code": "str",
    "game_mode": "str",
    "game_duration": "duration",
    "tournament_id": "int | None",
    "tournament_stage_id": "int | None",
    "tournament_n": "int | None"
  }
  ```
- **Codes de rÃ©ponse** :
  - `200 OK`
  - `401 Unauthorized`

## Tournois
```
ğŸ”’ GET https://localhost:4443/api/game/tournaments/<int:tournament_id>/
```
- **Description** : RÃ©cupÃ¨re l'instance d'un tournoi.
- **RÃ©ponse (succÃ¨s)** :
```json
{
    "id": "int",
    "name": "str",
    "start_at": "datetime",
    "size": "int",
    "created_at": "datetime",
    "created_by": "int",
    "matches": {
        "round-of-16": ["MatchInstance", "MatchInstance", "..."],
        "quarter-final": ["..."],
        "semi-final": ["..."],
        "final": ["..."]
    }
}
```
- **Codes de rÃ©ponse** :
  - `200 OK`
  - `401 Unauthorized`

## Jouer
```
ğŸ”’ POST https://localhost:4443/api/play/duel/
```
- **Description** : Permet Ã  un utilisateur de rejoindre la file d'attente pour jouer Ã  au mode de jeu `duel`.
- **RÃ©ponse (succÃ¨s)** :
  ```json
  {
    "id": "int",
    "game_mode": "duel",
    "trophies": "int",
    "join_at": "datetime"
  }
  ```
- **Codes de rÃ©ponse** :
  - `201 Ressource Created`
  - `401 Unauthorized`
  - `409 Conflict` : Si l'utilisateur est dÃ©jÃ  en train de jouer.

```
ğŸ”’ POST https://localhost:4443/api/play/ranked/
```
- **Description** : Permet Ã  un utilisateur de rejoindre la file d'attente pour jouer Ã  au mode de jeu `ranked`.
- **RÃ©ponse (succÃ¨s)** :
  ```json
  {
    "id": "int",
    "game_mode": "ranked",
    "trophies": "int",
    "join_at": "datetime"
  }
  ```
- **Codes de rÃ©ponse** :
  - `201 Ressource Created`
  - `401 Unauthorized`
  - `403 Permission Denied` : Si l'utilisateur est un utilisateur invitÃ©.
  - `409 Conflict` : Si l'utilisateur est dÃ©jÃ  en train de jouer.

## Lobby
```
ğŸ”’ POST https://localhost:4443/api/play/lobby/
```
- **Description** : CrÃ©er un lobby.
- **Body (JSON)** :
  ```json
  {
    "*game_mode": "clash | custom_game"
  }
  ```
- **RÃ©ponse (succÃ¨s)** :
  ```json
  {
    "id": "int",
    "participants": ["LobbyParticipantInstance", "..."],
    "is_full": "bool",
    "code": "str",
    "max_participants": "int",
    "created_at": "datetime",
    "game_mode": "clash | custom_game",
    "match_type": "1v1 | 3v3"
  }
  ```
- **Codes de rÃ©ponse** :
  - `201 Ressource Created`
  - `401 Unauthorized`
  - `409 Conflict` : Si l'utilisateur est dÃ©jÃ  en train de jouer.

```
ğŸ”’ GET https://localhost:4443/api/play/lobby/
```
- **Description** : Retourne l'instance du lobby auquel l'utilisateur appartient.
- **RÃ©ponse (succÃ¨s)** :
  ```json
  {
    "id": "int",
    "participants": ["LobbyParticipantInstance", "..."],
    "is_full": "bool",
    "code": "str",
    "max_participants": "int",
    "created_at": "datetime",
    "game_mode": "clash | custom_game",
    "match_type": "1v1 | 3v3"
  }
  ```
- **Codes de rÃ©ponse** :
  - `201 Ressource Created`
  - `401 Unauthorized`
  - `404 Not Found` : Si l'utilisateur n'appartient Ã  aucun lobby.

```
ğŸ”’ PATCH https://localhost:4443/api/play/lobby/
```
- **Description** : Met Ã  jour l'instance du lobby.
- **Body (JSON)** :
  ```json
  {
    "match_type": "1v1 | 3v3"
  }
  ```
- **RÃ©ponse (succÃ¨s)** :
  ```json
  {
    "id": "int",
    "participants": ["LobbyParticipantInstance", "..."],
    "is_full": "bool",
    "code": "str",
    "max_participants": "int",
    "created_at": "datetime",
    "game_mode": "clash | custom_game",
    "match_type": "1v1 | 3v3"
  }
  ```
- **Codes de rÃ©ponse** :
  - `200 OK`
  - `400 Bad Request`
  - `401 Unauthorized`
  - `403 Permission Denied` : Si l'utilisateur n'est pas le crÃ©ateur du lobby.
  - `404 Not Found` : Si l'utilisateur n'a pas rejoint de lobby.
  - `405 Method Not Allowed` : Si le mode de jeu du lobby est `clash`.

```
ğŸ”’ POST https://localhost:4443/api/play/lobby/<str:lobby_code>/
```
- **Description** : Rejoins l'instance du lobby.
- **RÃ©ponse (succÃ¨s)** :
  ```json
  {
    "**": "SmallUserInstance",
    "creator": "bool",
    "team": "a | b | spectator",
    "join_at": "datetime",
    "is_ready": "bool"
  }
  ```
  - Le champ `team` est renvoyÃ© uniquement si le mode de jeu est `custom_game`.
- **Codes de rÃ©ponse** :
  - `201 Ressource Created`
  - `401 Unauthorized`
  - `404 Not Found` : Si le `lobby_code` n'existe pas ou que le crÃ©ateur du lobby a bloquÃ© l'utilisateur qui fait la requÃªte.
  - `409 Conflict` : Si l'utilisateur est dÃ©jÃ  en train de jouer.

```
ğŸ”’ PATCH https://localhost:4443/api/play/lobby/<str:lobby_code>/
```
- **Description** : Met Ã  jour l'instance de l'utilisateur dans le lobby.
- **Body (JSON)** :
  ```json
  {
    "is_ready": "bool",
    "team": "a | b | spectator"
  }
  ```
  - Le champ `team` peut Ãªtre passÃ© uniquement si le mode de jeu est `custom_game`.
- **RÃ©ponse (succÃ¨s)** :
  ```json
  {
    "**": "SmallUserInstance",
    "creator": "bool",
    "team": "a | b | spectator",
    "join_at": "datetime",
    "is_ready": "bool"
  }
  ```
  - Le champ `team` est renvoyÃ© uniquement si le mode de jeu est `custom_game`.
- **Codes de rÃ©ponse** :
  - `200 OK`
  - `400 Bad Request`
  - `401 Unauthorized`
  - `403 Permission Denied` : Si l'utilisateur n'a pas rejoint le lobby ou que le joueur tente de rejoindre une team qui est pleine.

### Ban
```
ğŸ”’ DELETE https://localhost:4443/api/play/lobby/<str:lobby_code>/ban/<int:user_id>/
```
- **Description** : Quitte le lobby.
- **Codes de rÃ©ponse** :
  - `204 No Content`
  - `401 Unauthorized`
  - `403 Permission Denied` : Si l'utilisateur n'a pas rejoint le lobby.


### Invitation
```
ğŸ”’ POST https://localhost:4443/api/play/lobby/<str:lobby_code>/invite/<int:user_id>/
```
- **Description** : Invite l'utilisateur dans le lobby.
- **Codes de rÃ©ponse** :
  - `204 No Content`
  - `401 Unauthorized`
  - `403 Permission Denied` : Si l'utilisateur n'a pas rejoint le lobby, ou que le lobby n'existe pas, que l'utilisateur tente de s'inviter lui-mÃªme ou que l'utilisateur n'est pas le crÃ©ateur du lobby.
  - `404 Not Found` : Si l'utilisateur invitÃ© n'est pas dans le lobby.

### Message de lobby
```
ğŸ”’ POST https://localhost:4443/api/play/lobby/<str:lobby_code>/message/
```
- **Description** : Envoie un message dans le lobby.
- **Body (JSON)** :
  ```json
  {
    "*content": "str"
  }
  ```
- **Codes de rÃ©ponse** :
  - `201 Content Created`
  - `400 Bad Request`
  - `401 Unauthorized`
  - `403 Permission Denied` : Si l'utilisateur n'a pas rejoint le lobby ou que le lobby n'existe pas.

## Tournoi
```
ğŸ”’ POST https://localhost:4443/api/play/tournament/
```
- **Description** : CrÃ©er un tournoi.
- **Body (JSON)** :
  ```json
  {
    "*name": "str",
    "*size": "4 | 8 | 16"
  }
  ```
- **RÃ©ponse (succÃ¨s)** :
  ```json
  {
    "id": "int",
    "name": "str",
    "participants": ["TournamentParticipantInstance", "..."],
    "private": "bool",
    "is_started": "bool",
    "start_at": "datetime",
    "code": "str",
    "size": "int",
    "created_at": "datetime",
    "created_by": "int"
  }
  ```
- **Codes de rÃ©ponse** :
  - `201 Ressource Created`
  - `400 Bad Request`
  - `401 Unauthorized`
  - `403 Permission Denied` : L'utilisateur a dÃ©jÃ  crÃ©Ã© un tournoi.
  - `409 Conflict` : Si l'utilisateur est dÃ©jÃ  en train de jouer.

```
ğŸ”’ GET https://localhost:4443/api/play/tournament/
```
- **Description** : Retourne l'instance du tournoi auquel l'utilisateur appartient.
  ```json
  {
    "id": "int",
    "name": "str",
    "participants": ["TournamentParticipantInstance", "..."],
    "private": "bool",
    "is_started": "bool",
    "start_at": "datetime",
    "code": "str",
    "size": "int",
    "created_at": "datetime",
    "created_by": "int",
    "matches": {
        "round-of-16": ["MatchInstance", "MatchInstance", "..."],
        "quarter-final": ["..."],
        "semi-final": ["..."],
        "final": ["..."]
    }
  }
  ```
  - Le champ `matches` est renvoyÃ© uniquement si le tournoi est commencÃ©.
- **Codes de rÃ©ponse** :
  - `201 Ressource Created`
  - `401 Unauthorized`
  - `404 Not Found` : Si l'utilisateur n'appartient Ã  aucun tournoi.

```
ğŸ”’ POST https://localhost:4443/api/play/tournament/<str:tournament_code>/
```
- **Description** : Rejoins l'instance du tournoi.
- **RÃ©ponse (succÃ¨s)** :
  ```json
  {
    "**": "SmallUserInstance",
    "tournament": "int",
    "stage": "int",
    "seed": "int",
    "still_in": "bool",
    "creator": "bool",
    "join_at": "datetime"
  }
  ```
- **Codes de rÃ©ponse** :
  - `201 Ressource Created`
  - `401 Unauthorized`
  - `404 Not Found` : Si le tournoi n'existe pas ou que le crÃ©ateur du tournoi a bloquÃ© l'utilisateur qui fait la requÃªte.
  - `409 Conflict` : Si l'utilisateur est dÃ©jÃ  en train de jouer.

```
ğŸ”’ DELETE https://localhost:4443/api/play/tournament/<str:tournament_code>/
```
- **Description** : Quitte le tournoi.
- **Codes de rÃ©ponse** :
  - `204 No Content`
  - `401 Unauthorized`
  - `403 Permission Denied` : Si l'utilisateur n'a pas rejoint le tournoi.

### Ban
```
ğŸ”’ DELETE https://localhost:4443/api/play/tournament/<str:tournament_code>/ban/<int:user_id>/
```
- **Description** : Ban l'utilisateur du tournoi.
- **Codes de rÃ©ponse** :
  - `204 No Content`
  - `401 Unauthorized`
  - `403 Permission Denied` : Si l'utilisateur n'a pas rejoint le tournoi, que le tournoi n'existe pas, que l'utilisateur tente de se bannir lui-mÃªme ou que l'utilisateur n'est pas le crÃ©ateur du tournoi.
  - `404 Not Found` : Si l'utilisateur invitÃ© n'est pas dans le tournoi.

### Invitation
```
ğŸ”’ POST https://localhost:4443/api/play/tournament/<str:tournament_code>/invite/<int:user_id>/
```
- **Description** : Invite l'utilisateur dans le tournoi.
- **Codes de rÃ©ponse** :
  - `204 No Content`
  - `401 Unauthorized`
  - `403 Permission Denied` : Si l'utilisateur n'a pas rejoint le tournoi, que le tournoi n'existe pas, que l'utilisateur tente de se bannir lui-mÃªme ou que l'utilisateur n'est pas le crÃ©ateur du tournoi.
  - `404 Not Found` : Si l'utilisateur invitÃ© n'est pas dans le tournoi.

### Messages de tournoi
```
ğŸ”’ POST https://localhost:4443/api/play/tournament/<str:tournament_code>/message/
```
- **Description** : Envoie un message dans le tournoi.
- **Body (JSON)** :
  ```json
  {
    "*content": "str"
  }
  ```
- **Codes de rÃ©ponse** :
  - `201 Content Created`
  - `400 Bad Request`
  - `401 Unauthorized`
  - `403 Permission Denied` : Si l'utilisateur n'a pas rejoint le tournoi ou que le tournoi n'existe pas.

### Chercher un tournoi
```
ğŸ”’ GET https://localhost:4443/api/play/tournament/search/
```
- **Description** : Recherche un tournoi. Affiche uniquement les tournois publics.
- **Body (JSON)** :
  ```json
  {
    "*q": "str"
  }
  ```
- **RÃ©ponse (succÃ¨s)** :
  - results:
  ```json
  {
    "id": "int",
    "code": "str",
    "name": "str",
    "n_participants": "int",
    "size": "int",
    "created_by": "str"
  }
  ```
- **Codes de rÃ©ponse** :
  - `200 OK`
  - `401 Unauthorized`

# Users
### Base URL
```
https://localhost:4443/api/users/
```

## Me
```
ğŸ”’ GET https://localhost:4443/api/users/me/
```
- **Description** : RÃ©cupÃ¨re l'instance de l'utilisateur authentifiÃ©.
- **RÃ©ponse (succÃ¨s)** :
  ```json
  {
    "id": "int",
    "username": "str",
    "is_guest": "bool",
    "created_at": "datetime",
    "profile_picture": "SmallProfilePictureInstance",
    "accept_friend_request": "bool",
    "accept_chat_from": "none | friends_only | everyone",
    "trophies": "int",
    "notifications": {"friend_requests":  0, "chats": 0},
    "is_online": "bool",
    "last_online": "datetime"
  }
  ```
- **Codes de rÃ©ponse** :
  - `200 OK`
  - `401 Unauthorized`

```
ğŸ”’ PATCH https://localhost:4443/api/users/me/
```
- **Description** : Met Ã  jour l'instance de l'utilisateur authentifiÃ©.
- **Body (JSON)** :
  ```json
  {
    "username": "str",
    "password": "str",
    "old_password": "str",
    "accept_friend_request": "bool",
    "accept_chat_from": "none | friends_only | everyone"
  }
  ```
  - Le champ `old_password` est requis pour changer le mot de passe.
- **RÃ©ponse (succÃ¨s)** :
  ```json
  {
    "id": "int",
    "username": "str",
    "is_guest": "bool",
    "created_at": "datetime",
    "profile_picture": "SmallProfilePictureInstance",
    "accept_friend_request": "bool",
    "accept_chat_from": "none | friends_only | everyone",
    "trophies": "int",
    "notifications": {"friend_requests":  0, "chats": 0},
    "is_online": "bool",
    "last_online": "datetime"
  }
  ```
- **Codes de rÃ©ponse** :
  - `200 OK`
  - `400 Bad Request`
  - `401 Unauthorized`

```
ğŸ”’ DELETE https://localhost:4443/api/users/me/
```
- **Description** : Supprime l'instance de l'utilisateur authentifiÃ©.
- **Body (JSON)** :
  ```json
  {
    "*password": "str"
  }
  ```
- **Codes de rÃ©ponse** :
  - `204 No Content`
  - `401 Unauthorized`

## Utilisateur
```
ğŸ”’ GET https://localhost:4443/api/users/<int:user_id>/
```
- **Description** : RÃ©cupÃ¨re l'instance de l'utilisateur.
- **RÃ©ponse (succÃ¨s)** :
  ```json
  {
    "id": "int",
    "username": "str",
    "is_guest": "bool",
    "profile_picture": "SmallProfilePictureInstance",
    "status": {"is_online": "bool", "game_playing":  "str | None", "last_online": "datetime"},
    "trophies": "int",
    "friends": "FriendsInstance | None"
  }
  ```
- **Codes de rÃ©ponse** :
  - `200 OK`
  - `401 Unauthorized`
  - `404 Not Found` : L'utilisateur n'a pas Ã©tÃ© trouvÃ© : parce qu'il n'existe pas, ou parce que l'utilisateur cherchait Ã  bloquer l'utilisateur qui fait la requÃªte.

## Demandes d'amis
```
ğŸ”’ GET https://localhost:4443/api/users/me/friend_requests/
```
- **Description** : RÃ©cupÃ¨re la liste toutes les demandes d'amis de l'utilisateur.
- **RÃ©ponse (succÃ¨s)** :
  - results:
  ```json
  {
    "id": "int",
    "sender": "SmallUserInstance",
    "receiver": "SmallUserInstance",
    "send_at": "datetime"
  }
  ```
- **Codes de rÃ©ponse** :
  - `200 OK`
  - `401 Unauthorized`

```
ğŸ”’ POST https://localhost:4443/api/users/me/friend_requests/
```
- **Description** : Envoie une demande d'ami Ã  l'utilisateur.
- **Body (JSON)** :
  ```json
  {
    "*username": "str"
  }
  ```
- **RÃ©ponse (succÃ¨s)** :
  ```json
  {
    "id": "int",
    "sender": "SmallUserInstance",
    "receiver": "SmallUserInstance",
    "send_at": "datetime"
  }
  ```
- **Codes de rÃ©ponse** :
  - `201 Ressource Created`
  - `400 Bad Request`
  - `401 Unauthorized`
  - `403 Permission Denied` : Si l'utilisateur fait une demande d'amis Ã  un utilisateur qu'il a bloquÃ©, ou que l'utilisateur ne reÃ§oit pas les demandes d'amis, ou que l'utilisateur qui fait la demande a envoyÃ© plus de 20 demandes en attente.
  - `404 Not Found` : Si le nom d'utilisateur n'existe pas ou qu'il a bloquÃ© l'utilisateur qui fait la requÃªte.
  - `409 Conflict` : La demande d'amis ou l'amitiÃ© existe dÃ©jÃ .

```
ğŸ”’ GET https://localhost:4443/api/users/me/friend_requests/received/
```
- **Description** : RÃ©cupÃ¨re la liste de toutes les demandes d'ami reÃ§u.
- **RÃ©ponse (succÃ¨s)** :
  - results:
  ```json
  {
    "id": "int",
    "sender": "SmallUserInstance",
    "receiver": "SmallUserInstance",
    "send_at": "datetime"
  }
  ```
- **Codes de rÃ©ponse** :
  - `200 OK`
  - `401 Unauthorized`

## Demande d'amis
```
ğŸ”’ GET https://localhost:4443/api/users/me/friend_requests/<int:friends_request_id>/
```
- **Description** : RÃ©cupÃ¨re une instance de demande d'amis.
- **RÃ©ponse (succÃ¨s)** :
  - results:
  ```json
  {
    "id": "int",
    "sender": "SmallUserInstance",
    "receiver": "SmallUserInstance",
    "send_at": "datetime"
  }
  ```
- **Codes de rÃ©ponse** :
  - `200 OK`
  - `401 Unauthorized`
  - `404 Not Found` : Si l'utilisateur n'existe pas ou que l'utilisateur qui tente d'accÃ©der Ã  l'instance de demande d'amis, n'est ni celui qui l'a envoyÃ©, ni celui qui l'a reÃ§u.

```
ğŸ”’ DELETE https://localhost:4443/api/users/me/friend_requests/<int:friends_request_id>/
```
- **Description** :  Supprime lâ€™instance de demande d'amis.
- **Codes de rÃ©ponse** :
  - `204 No Content`
  - `401 Unauthorized`
  - `404 Not Found` : Si l'utilisateur n'existe pas ou que l'utilisateur qui tente d'accÃ©der Ã  l'instance de demande d'amis, n'est ni celui qui l'a envoyÃ©, ni celui qui l'a reÃ§u.

```
ğŸ”’ POST https://localhost:4443/api/users/me/friend_requests/<int:friends_request_id>/
```
- **Description** : Accepte une demande d'amis.
- **RÃ©ponse (succÃ¨s)** :
  - results:
  ```json
  {
    "id": "int",
    "friend": "SmallUserInstance",
    "friend_win": "int",
    "me_win": "int",
    "friends_since": "datetime",
    "matches_play_against": "int",
    "matches_played_together": "int",
    "matches_won_together": "int"
  }
  ```
- **Codes de rÃ©ponse** :
  - `201 Ressource Created`
  - `401 Unauthorized`
  - `403 Permission Denied` : Si lâ€™utilisateur qui a envoyÃ© la demande tente dâ€™accepter lui-mÃªme la demande
  - `404 Not Found` : Si l'utilisateur n'existe pas ou que l'utilisateur qui tente d'accÃ©der Ã  l'instance de demande d'amis, n'est ni celui qui l'a envoyÃ©, ni celui qui l'a reÃ§u.

## Amis
```
ğŸ”’ GET https://localhost:4443/api/users/me/friends/
```
- **Description** : RÃ©cupÃ¨re la liste de toutes les amitiÃ©s de l'utilisateur.
- **RÃ©ponse (succÃ¨s)** :
  - results:
  ```json
  {
    "id": "int",
    "friend": "SmallUserInstance",
    "friend_win": "int",
    "me_win": "int",
    "friends_since": "datetime",
    "matches_play_against": "int",
    "matches_played_together": "int",
    "matches_won_together": "int"
  }
  ```
- **Codes de rÃ©ponse** :
  - `200 OK`
  - `401 Unauthorized`

```
ğŸ”’ DELETE https://localhost:4443/api/users/me/friends/<int:friends_id>/
```
- **Description** : Supprime une amitiÃ©.
- **Codes de rÃ©ponse** :
  - `204 No Content`
  - `401 Unauthorized`
  - `404 Not Found` : Si lâ€™amitiÃ© nâ€™existe pas ou que celui qui fait la requÃªte ne fait pas partie de lâ€™amitiÃ©

## Bloquer
```
ğŸ”’ GET https://localhost:4443/api/users/me/blocked/
```
- **Description** : RÃ©cupÃ¨re la liste de tous les utilisateurs bloquÃ©s.
- **RÃ©ponse (succÃ¨s)** :
  - results:
  ```json
  {
    "id": "int",
    "blocked": "SmallUserInstance",
    "blocked_at": "datetime"
  }
  ```
- **Codes de rÃ©ponse** :
  - `200 OK`
  - `401 Unauthorized`

```
ğŸ”’ POST https://localhost:4443/api/users/me/blocked/
```
- **Description** : Bloque un utilisateur.
- **Body (JSON)** :
  ```json
  {
    "*user_id": "int"
  }
  ```
- **RÃ©ponse (succÃ¨s)** :
  - results:
  ```json
  {
    "id": "int",
    "blocked": "SmallUserInstance",
    "blocked_at": "datetime"
  }
  ```
- **Codes de rÃ©ponse** :
  - `201 Ressource Created`
  - `401 Unauthorized`
  - `403 Permission Denied` : Si lâ€™utilisateur tente de se bloquer soi-mÃªme ou que l'utilisateur a dÃ©jÃ  bloquÃ© 50 utilisateurs.
  - `404 Not Found` : Si l'utilisateur n'existe pas ou que l'utilisateur est un utilisateur invitÃ© ou que l'utilisateur a dÃ©jÃ  bloquÃ© l'utilisateur qui fait la requÃªte.
  - `409 Conflict` : Si l'utilisateur a dÃ©jÃ  bloquÃ© user_id.

```
ğŸ”’ DELETE https://localhost:4443/api/users/me/blocked/<int:blocked_id>/
```
- **Description** : Supprime l'instance de bloc (dÃ©bloque l'utilisateur).
- **Codes de rÃ©ponse** :
  - `204 No Content`
  - `401 Unauthorized`
  - `404 Not Found` : Si blocked_id n'existe pas ou que l'utilisateur qui fait la requÃªte n'est pas le mÃªme qui a bloquÃ© l'utilisateur dans blocked_id.

## DonnÃ©es de l'utilisateur
```
ğŸ”’ GET https://localhost:4443/api/users/me/download-data/
```
- **Description** : RÃ©cupÃ¨re un fichier .json avec toutes les donnÃ©es de l'utilisateur.
- **RÃ©ponse (contenu du fichier json)** :
  ```json
  {
    "user_data": "UserMeInstance",
    "profile_pictures_data": "list[ProfilePictureInstance]",
    "friends_data": {"friends": "list[FriendInstance]", "friend_requests_sent": "list[FriendRequestsInstance]", "friend_requests_received": "list[FriendRequestsInstance]", "blocked_users": "list[BlockedInstance]"},
    "stats_data": "list[StatsInstance]",
    "chat_data": "list[ChatInstance]",
    "game_data": {"matches": "list[MatchInstance]", "tournament": "list[TournamentInstance]"}
  }
  ```
  - Dans `ChatInstance` le champ `last_message` est remplacÃ© par le champ `messages` qui est une liste de tous les messages de la conversation.
- **Codes de rÃ©ponse** :
  - `200 OK`
  - `401 Unauthorized`

## Photo de profil
```
ğŸ”’ GET https://localhost:4443/api/users/profile-pictures/
```
- **Description** : RÃ©cupÃ¨re la liste de toutes les photos de profil disponible.
- **RÃ©ponse** :
  ```json
  {
    "id": "int",
    "name": "str",
    "unlock_reason": "str",
    "unlock": "bool",
    "is_equiped": "bool",
    "url": "/assets/profile_pictures/xxx.png",
    "small": "/assets/profile_pictures/xxx_small.png",
    "medium": "/assets/profile_pictures/xxx_medium.png",
    "large": "/assets/profile_pictures/xxx_large.png"
  }
  ```
- **Codes de rÃ©ponse** :
  - `200 OK`
  - `401 Unauthorized`

```
ğŸ”’ PUT https://localhost:4443/api/users/profile-picture/<int:id>/
```
- **Description** : Mets Ã  jour la photo de profil de l'utilisateur.
- **RÃ©ponse** :
  ```json
  {
    "id": "int",
    "name": "str",
    "unlock_reason": "str",
    "unlock": "bool",
    "is_equiped": "bool",
    "url": "/assets/profile_pictures/xxx.png",
    "small": "/assets/profile_pictures/xxx_small.png",
    "medium": "/assets/profile_pictures/xxx_medium.png",
    "large": "/assets/profile_pictures/xxx_large.png"
  }
  ```
- **Codes de rÃ©ponse** :
  - `200 OK`
  - `401 Unauthorized`
  - `403 Permission Denied` : L'utilisateur n'a pas dÃ©bloquÃ© la photo de profil.
  - `404 Not Found` : La photo de profile demande n'existe pas.

## Statistiques
```
ğŸ”’ GET https://localhost:4443/api/users/me/stats/
```
- **Description** : RÃ©cupÃ¨re la liste des statistiques sur tous les modes de jeux. Il n'y a pas de statistique pour le mode de jeu `custom_game`. Il y a des statistiques avec pour mode de jeu `global`. Cela correspond aux statistiques du joueur sur tous les modes de jeu. L'instance `global` se trouve toujours Ã  l'index 0. MÃªme si les donnÃ©es retournÃ©es sont sous forme de liste, cet endpoint n'a pas de systÃ¨me de pagination, le nombre de rÃ©sultats Ã©tant fixe.
- **RÃ©ponse (succÃ¨s)** :
  ```json
  {
    "id": "int",
    "game_mode": "global | duel | clash | ranked | tournament",
    "game_played": "int",
    "wins": "int",
    "scored": "int",
    "longest_win_streak": "int",
    "current_win_streak": "int",
    "own_goals": "int",
    "tournament_wins": "int"
  }
  ```
  - Le champ `own_goals` est renvoyÃ© uniquement si le mode de jeu est `clash`.
  - Le champ `tournament_wins` est renvoyÃ© uniquement si le mode de jeu est `tournament`.
- **Codes de rÃ©ponse** :
  - `200 OK`
  - `401 Unauthorized`

## Statistiques du mode de jeu ranked
```
ğŸ”’ GET https://localhost:4443/api/users/me/stats/ranked/
```
- **Description** : RÃ©cupÃ¨re la liste de l'evolution du nombre de trophÃ©es au cours des matchs.
- **RÃ©ponse (succÃ¨s)** :
  - results:
  ```json
  {
    "id": "int",
    "trophies": "int",
    "total_trophies": "int",
    "at": "datetime"
  }
  ```
- **Codes de rÃ©ponse** :
  - `200 OK`
  - `401 Unauthorized`


# SSE

```
ğŸ”’ GET https://localhost:4443/sse/users/
```
- **Description** :  Permet de se connecter au SSE.
- **RÃ©ponse (succÃ¨s)** :
  - results:
```
event: event_name\n
data: {data}\n\n
```
- **Codes de rÃ©ponse** :
  - `200 OK`
  - `401 Unauthorized`

# Event SSE
```
ğŸ”’ GET https://localhost:4443/api/private/users/
```
- **Description** : Permet de crÃ©er un event SSE.
- **Body (JSON)** :
  ```json
  {
    "*users_id": "list[int]",
    "*event_code": "str",
    "data": "dict | None",
    "kwargs": "dict | None"
  }
  ```
  - **RÃ©ponse (succÃ¨s)** :
  {
    "*users_id": "list[int]",
    "*event_code": "str",
    "data": "dict | None",
    "kwargs": "dict | None"
  }
- **Codes de rÃ©ponse** :
  - `201 Ressource Created`
  - `400 Bad Request`
  - `404 Not Found` : Si aucun des utilisateurs envoyÃ© existe ou qu'aucun des utilisateurs envoyÃ© n'est connectÃ©.

## Message
- ***receive-message*** est envoyÃ© lorsque que lâ€™utilisateur reÃ§oit un message. data: *MessageInstance*, kwargs : *username, message, chat_id*

## User
- ***delete-user*** est envoyÃ© lorsque que lâ€™utilisateur supprime son compte.

## Game
Event envoyÃ© quand le joueur joue dans une game :
- ***game-start*** est envoyÃ© Ã  tous les utilisateurs de la game. data: *MatchInstance*

## Friend
Events envoyÃ©s pour la gestion des amitiÃ©s :
- ***accept-friend-request*** est envoyÃ© Ã  l'utilisateur faisant la demande d'amis, si jamais il est connectÃ©. Il est envoyÃ© si l'utilisateur recevant la demande accepte la demande. data: *FriendInstance*, kwargs : *username*
- ***receive-friend-request*** est envoyÃ© Ã  l'utilisateur recevant la demande d'amis, si jamais il est connectÃ©. Il est envoyÃ© si l'utilisateur reÃ§oit une demande d'amis. data: *FriendRequestInstance*, kwargs : *id, username*
- ***reject-friend-request*** est envoyÃ© Ã  l'utilisateur faisant la demande d'amis, si jamais il est connectÃ©. Il est envoyÃ© si jamais l'utilisateur recevant la demande rejette la demande, si l'utilisateur recevant la demande bloque celui l'envoyant, ou si l'utilisateur recevant la demande supprime son compte. data: *{"id" : FriendRequestInstance.id}*
- ***cancel-friend-request*** est envoyÃ© Ã  l'utilisateur recevant la demande d'amis, si jamais il est connectÃ©. Il est envoyÃ© si jamais l'utilisateur envoyant la demande d'amis annule l'envoie de cette demande d'amis, si l'utilisateur envoyant la demande d'amis bloque celui qui la reÃ§oit *(uniquement dans ce cas, l'event est envoyÃ© aux deux utilisateurs)*, ou si l'utilisateur envoyant la demande d'amis supprime son compte. data: *{"id" : FriendRequestInstance.id}*
- ***delete-friend*** est envoyÃ© Ã  l'autre utilisateur de la relation d'amitiÃ©, si jamais il est connectÃ©. Il est envoyÃ© si jamais un des utilisateurs supprime l'amitiÃ©, si l'un des deux utilisateurs bloque l'autre, ou si l'un des deux utilisateurs supprime son compte. data: *{"id" : FriendInstance.id}*

## Lobby
Events envoyÃ©s quand l'utilisateur est dans un lobby :
- ***lobby-join*** est envoyÃ© Ã  tous les utilisateurs dÃ©jÃ  prÃ©sents dans le lobby afin de les informer qu'un nouvel utilisateur a rejoint le lobby. data: *LobbyParticipantInstance*, kwargs : *username*
- ***lobby-leave*** est envoyÃ© Ã  tous les utilisateurs prÃ©sents dans le lobby afin de les informer qu'un utilisateur Ã  quitter le lobby. data: *{"id" : "int"}*, kwargs : *username*
- ***lobby-banned*** est envoyÃ© Ã  l'utilisateur banni. Les autres participants du lobby reÃ§oivent un event *lobby-leave*.
- ***lobby-message*** est envoyÃ© Ã  tous les utilisateurs prÃ©sents dans le lobby (exceptÃ© l'auteur du message). kwargs : *username*
- ***lobby-update*** est envoyÃ© Ã  tous les utilisateurs prÃ©sents dans le lobby (exceptÃ© le crÃ©ateur) afin de les informer que les paramÃ¨tres du lobby ont Ã©tÃ© changÃ©s. data: *LobbyInstance* (uniquement les champs qui ont Ã©tÃ© modifiÃ©s).
- ***lobby-update-participant*** est envoyÃ© Ã  tous les utilisateurs prÃ©sents dans le lobby (exceptÃ© celui qui performe la modification) afin de les informer que les paramÃ¨tres de l'utilisateur ont Ã©tÃ© changÃ©s. data: *LobbyParticipantInstance* (uniquement les champs qui ont Ã©tÃ© modifiÃ©s Ã  savoir oÃ¹ `creator`, `team` ou `is_ready`).
- ***lobby-spectate-game*** est envoyÃ© Ã  tous les utilisateurs prÃ©sents dans la team "spectator" lorsqu'une game commence. data : *{"code" : "str"}*
- ***lobby-destroy*** est envoyÃ© Ã  tous les utilisateurs utilisateur invitÃ© prÃ©sents dans le lobby dans le cas oÃ¹ le creator quitte le lobby, et que plus aucun utilisateur enregistrÃ© reste dans le lobby, afin de les informer le lobby a Ã©tÃ© dÃ©truit.

## Tournament
Events envoyÃ©s quand l'utilisateur est dans un tournoi :
- ***tournament-join*** est envoyÃ© Ã  tous les utilisateurs dÃ©jÃ  prÃ©sents dans le tournoi afin de les informer qu'un nouvel utilisateur a rejoint le tournoi. data: *TournamentParticipantInstance*, kwargs : *username*
- ***tournament-leave*** est envoyÃ© Ã  tous les utilisateurs prÃ©sents dans le tournoi afin de les informer qu'un utilisateur Ã  quitter le tournoi. data: *{"id" : "int"}*, kwargs : *username*
- ***tournament-banned*** est envoyÃ© Ã  l'utilisateur banni. Les autres participants du tournoi reÃ§oivent un event *tournament-leave*.
- ***tournament-message*** est envoyÃ© Ã  tous les utilisateurs prÃ©sents dans le tournoi (exceptÃ© l'auteur du message). kwargs : *username*
- ***tournament-start-at*** est envoyÃ© Ã  tous les participants du tournoi pour les informer que le tournoi commence Ã  "start_at". C'est lorsque le tournoi est rempli Ã  80% de la taille. Il y a alors une pÃ©riode de 20 secondes d'attente avant que le tournoi commence. Si une personne quitte pendant ce temps d'attente, l'event *tournament-start-cancel* est envoyÃ© Ã  tous les utilisateurs encore prÃ©sents et "start_at" est remis Ã  None. data: *{"id" : "int", "start_at" : "datetime"}*
- ***tournament-start-cancel*** est envoyÃ© Ã  tous les participants du tournoi pour les informer que le lancement du tournoi est annulÃ©. data: *{"id" : "int", "start_at" : "datetime"}*
- ***tournament-start*** est envoyÃ© Ã  tous les participants du tournoi pour les informer que le tournoi commence (soit parce que le "start_at" est passÃ© ou parce que le tournoi est complet). Il y a alors un timer de trois secondes avant que les game se lance, afin d'avoir le temps de voir le bracket (qui est envoyÃ© dans les data). data: *TournamentInstance*
- ***tournament-available-spectate-matches*** est envoyÃ© Ã  tous les participants du tournoi Ã©liminÃ© pour qu'il puisse regarder les matchs restant en tant que spectateur. data: *{"game_id" : "game_code", ...}*
- ***tournament-match-finish*** est envoyÃ© Ã  tous les participants du tournoi pour les informer du rÃ©sultat d'un match. data: *TournamentInstance*, kwargs : *winner, looser, score_winner, score_looser, finish_reason*
- ***tournament-finish*** est envoyÃ© Ã  tous les participants du tournoi pour les informer que le tournoi est fini. kwargs : *id, name, username*

## Invite
Event envoyÃ© quand un joueur invite un autre joueur dans un lobby ou un tournoi :
- ***invite-clash*** est envoyÃ© Ã  l'utilisateur pour rejoindre un lobby clash. data : *{"id" : "int", "code" : "str"}*, kwargs : *username, code*
- ***invite-1v1*** est envoyÃ© Ã  l'utilisateur pour rejoindre une game_custom en 1v1. data : *{"id" : "int", "code" : "str"}*, kwargs : *username, code*
- ***invite-3v3*** est envoyÃ© Ã  l'utilisateur pour rejoindre une game_custom en 3v3. data : *{"id" : "int", "code" : "str"}*, kwargs : *username, code*
- ***invite-tournament*** est envoyÃ© Ã  l'utilisateur pour rejoindre un tournoi. data : *{"id" : "int", "code" : "str"}*, kwargs : *username, code*
En target est envoyÃ© l'URL Ã  mettre dans le navigateur dans le cas oÃ¹ l'utilisateur accepte l'invitation.

## User
- ***user-delete*** est envoyÃ© Ã  l'utilisateur qui supprime ses donnÃ©es. Par exemple, si plusieurs clients sont connectÃ©s, un des clients supprime son compte, les autres clients sont au courant, et peuvent delog l'utilisateur.
- ***profile-picture-unlocked*** est envoyÃ© Ã  l'utilisateur qui dÃ©bloque une photo de profil. data : *ProfilePictureInstance*, kwargs : *id*, taget : *use, see all*
